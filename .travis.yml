language: node_js
node_js:
- 8.9.4
branches:
  only:
  - master
before_install:
- openssl aes-256-cbc -K $encrypted_792626dc5472_key -iv $encrypted_792626dc5472_iv
  -in .travis/pixie_travis.enc -out ~/.ssh/pixie_travis -d
- chmod 600 ~/.ssh/pixie_travis
- sudo apt-get install -y expect
- npm install -g hexo-cli
install:
- npm install
before_script:
- git config --global user.name 'Avanish Shrestha'
- git config --global user.email 'avanissh@gmail.com'
script:
- hexo clean
- hexo generate
- hexo deploy
deploy:
  provider: script
  skip_cleanup: true
  script: bash .travis/deploy.sh
  on:
    branch: master
